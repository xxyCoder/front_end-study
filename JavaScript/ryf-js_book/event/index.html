<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>浏览器事件</title>
    <style>
        div {
            height: 100vh;
        }
    </style>
</head>

<body>
    <p>不允许复制</p>
    <a href="./readme.md">隐藏当前页面</a>
    <div></div>
    <script>
        console.log("readystate:", document.readyState);
        document.addEventListener("readystatechange", (event) => {
            console.log("readystatechange:", document.readyState)
        });
        window.addEventListener("DOMContentLoaded", (event) => {
            console.log("DOMContentLoaded");
        })
        window.addEventListener("load", (event) => {
            console.log("load")
        })
        window.addEventListener("pageshow", event => {
            console.log("pageshow");
            if (event.persisted) {
                console.log("从缓存中获取");
            } else {
                console.log("第一次加载");
            }
        })
        window.addEventListener("pagehide", event => {
            console.log("pagehide");
            event.persisted = true;
        })

        window.addEventListener("cut", event => {
            console.log("cut");
            event.preventDefault();
        })
        window.addEventListener("copy", (event) => {
            console.log("copy");
            event.preventDefault();
        });
        window.addEventListener("scroll", event => {
            console.log(document.body.scrollTop);
        })
        // 自定义事件
        const myEvent = new CustomEvent("build", {
            detail: {
                name: "xxyCoder"
            },
            bubbles: true,
            cancelable: true
        })
        const abort = new AbortController();
        window.addEventListener("build", event => {
            console.log("自定义事件:", event.detail);
        }, {
            signal: abort.signal
        })
        window.dispatchEvent(myEvent);
        abort.abort();
        window.dispatchEvent(myEvent);

        const fn = event => {
            console.log("click", event.bubbles, event.eventPhase, event.button, event.clientX, event.screenX);
            if (event.cancelable) {
                event.preventDefault();
            }
        };
        document.addEventListener("click", fn, {
            passive: true,
            capture: true
        });
        // document.removeEventListener("click", fn, true)
        window.addEventListener("wheel", event => {
            console.log(event.deltaY)
        })
    </script>
</body>

</html>